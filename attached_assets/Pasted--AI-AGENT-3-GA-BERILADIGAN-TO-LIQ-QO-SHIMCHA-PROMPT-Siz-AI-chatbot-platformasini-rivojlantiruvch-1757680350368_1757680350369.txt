ğŸ”§ AI AGENT 3 GA BERILADIGAN TOâ€˜LIQ QOâ€˜SHIMCHA PROMPT:
Siz AI chatbot platformasini rivojlantiruvchi AI sifatida ishlaysiz. Hozirgi loyiha (Flask + SQLite + Gemini) Replitda ishlaydi, lekin faqat veb-interfeys orqali. Endi sizga quyidagilarni qoâ€˜shish kerak â€” bu loyihani â€œkoâ€˜p kanallik SaaS bot platformasiâ€ga aylantirish uchun: 

âœ… MAQSAD:
Foydalanuvchilar oâ€˜z AI chatbotlarini Telegram, WhatsApp va Instagramâ€™ga ulab, bitta paneldan boshqarishi mumkin boâ€˜lsin.

ğŸš€ QOâ€˜SHILADIGAN FUNKSIYALAR (HAR BIRI UCHUN TIZIMLAR):
1. TELEGRAM BOT INTEGRATSIYASI
Har bir foydalanuvchi oâ€˜zining Telegram botini yaratadi (BotFather orqali).
Bot tokenini loyihada â€œBot Settingsâ€ sahifasida kiritadi.
Loyiha webhook sozlaydi â†’ https://your-app.com/telegram/webhook/{user_id}
Telegram xabarlarini qabul qilib, Gemini AI orqali javob beradi.
Javobni Telegram API orqali qaytaradi.
Barcha suhbatlar databaseâ€™da saqlanadi (telegram_conversations jadvali).
âœ… Talablar: 

Yangi model: TelegramBot (user_id, token, webhook_url, is_active)
Yangi route: /telegram/webhook/<int:user_id> (POST)
Webhook sozlash: POST /telegram/set-webhook
Tokenni saqlash: encrypted yoki hashed (fayl emas, DB da)
Replitda ishlamaydi â€” Render/Railway.ga oâ€˜tkazilganda faollashadi
2. WHATSAPP BUSINESS API INTEGRATSIYASI
Foydalanuvchi Meta Developer Account orqali WhatsApp Business API ni ulash uchun:
App ID, App Secret, Verify Token, Phone Number ID kiritadi.
Loyiha Webhook sozlaydi: https://your-app.com/whatsapp/webhook
Meta dan kelgan xabarlarni qabul qiladi â†’ AI bilan javob beradi â†’ Meta ga qaytaradi.
Barcha xabarlar whatsapp_conversations jadvalida saqlanadi.
âœ… Talablar: 

Yangi model: WhatsAppAccount (user_id, app_id, app_secret, verify_token, phone_number_id, is_active)
Yangi route: /whatsapp/webhook (GET/POST)
GET â€” challenge soâ€˜rovi uchun (verify token tekshirish)
POST â€” xabar qabul qilish, AI bilan javob berish
Tokenlarni shifrlash (cryptography.fernet) â€” hech qachon oddiy holda saqlanmasin!
3. INSTAGRAM BUSINESS API INTEGRATSIYASI
Foydalanuvchi Facebook Graph API orqali Instagram Business accountni ulaydi.
access_token, page_id kiritadi.
Loyiha Webhook sozlaydi: https://your-app.com/instagram/webhook
Xabarlar kelganda â†’ AI javob beradi â†’ Instagram API orqali joâ€˜natadi.
âœ… Talablar: 

Yangi model: InstagramAccount (user_id, access_token, page_id, is_active)
Yangi route: /instagram/webhook (GET/POST)
GET â€” verification uchun
POST â€” comment/message qabul qilish â†’ AI â†’ reply
Barcha xabarlar instagram_conversations jadvalida saqlanadi
ğŸ› ï¸ QOâ€˜SHILADIGAN YANGI KOMPONENTLAR:
models/messaging.py
TelegramBot
,
WhatsAppAccount
,
InstagramAccount
modellari
routes/messaging.py
Barcha
/telegram/...
,
/whatsapp/...
,
/instagram/...
routelari
utils/messaging/
Telegram/WhatsApp/Instagram API handler funksiyalari (ajratilgan)
templates/user/bots.html
Foydalanuvchi oâ€˜z botlarini ulash va boshqarish uchun panel (formalar + status)
static/js/bot-integrations.js
Webhook sozlash uchun AJAX formalar
config.py
Yangi oâ€˜zgaruvchilar:
WEBHOOK_BASE_URL = "https://your-repl-name.repl.co"
requirements.txt
python-dotenv
,
cryptography==42.0.5
qoâ€˜shing

ğŸ” XAVFSIZLIK TALABLARI:
Barcha API kalitlar (token, secret) â€” shifrlangan holda (Fernet) saqlanadi.
Har bir foydalanuvchi faqat oâ€˜zining botlarini koâ€˜radi va boshqaradi.
Webhook sozlash faqat tasdiqlangan (is_approved=True) foydalanuvchilar uchun.
Barcha soâ€˜rovlar HTTPS orqali â€” Replitda ishlamaydi, Render/Railway.ga oâ€˜tkazilganda faol boâ€˜ladi.
âš™ï¸ REPLITDA ISHLASH HAQIDA:
Bu yangi funksiyalar Replitda ishlamaydi, chunki:
Replit public IP va HTTPS webhook qabul qila olmaydi.
Lekin barcha kodlar tuzilgan boâ€˜lishi kerak â€” foydalanuvchi loyihani Render.ga koâ€˜chirganda avtomatik ishlay boshlasin.
Shu sababli:
Barcha kodlar mavjud loyihaga qoâ€˜shiladi, lekin â€œWebhook sozlashâ€ tugmachalari faol emas (Replitda â€œThis feature requires public HTTPS URLâ€ deb koâ€˜rsatiladi).
Admin panelida â€œIntegratsiya: Replitda ishlamaydi â€” Render.ga oâ€˜ting!â€ degan xabar chiqsin.
ğŸ’¡ FAOL QILISH UCHUN (Foydalanuvchi uchun qoâ€˜llanma):
ğŸ‘‰ â€œAgar siz Telegram, WhatsApp yoki Instagramâ€™ga bot ulamoqchi boâ€˜lsangiz: 

Loyihani Render.com yoki Railway.app ga deploy qiling.
Olingan HTTPS URL-ni (masalan: https://your-bot.onrender.com) qoâ€˜llanma qiling.
Telegram BotFather, Meta Business Suite, Facebook Graph APIâ€™dan kerakli kalitlarni oling.
Platforma > Bot Settings sahifasiga kirib, kalitlarni kiriting.
â€˜Set Webhookâ€™ tugmasini bosing â€” bot ulanadi!*
ğŸ“ YANGI FAULLAR STRUKTURASI (qoâ€˜shiladiganlar):


1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
models/
  â”œâ”€â”€ user.py
  â””â”€â”€ messaging.py          â† YANGI: TelegramBot, WhatsAppAccount, InstagramAccount

routes/
  â”œâ”€â”€ main_routes.py
  â”œâ”€â”€ admin_routes.py
  â””â”€â”€ messaging.py          â† YANGI: /telegram/webhook, /whatsapp/webhook, etc.

utils/
  â”œâ”€â”€ ai_handler.py
  â””â”€â”€ messaging/
      â”œâ”€â”€ telegram.py       â† send_message(), set_webhook()
      â”œâ”€â”€ whatsapp.py       â† handle_incoming(), verify_token()
      â””â”€â”€ instagram.py      â† handle_comment(), post_reply()

templates/
  â”œâ”€â”€ user/
  â”‚   â””â”€â”€ bots.html         â† YANGI: Telegram/WhatsApp/Instagram ulash paneli

static/
  â””â”€â”€ js/
      â””â”€â”€ bot-integrations.js â† YANGI: Webhook sozlash uchun AJAX

config.py
requirements.txt            â† cryptography qoâ€˜shildi
âœ… YAKUNIY SHART:
AI Agent 3 â€” ushbu qoâ€˜shimcha modullarni mavjud loyihaga (17 fayl) toâ€˜gâ€˜ri qoâ€˜shib, barcha yangi fayllarni toâ€˜gâ€˜ri tuzishi kerak.
Hech qanday import error, hech qanday xato boâ€˜lmasligi kerak.
Barcha webhooks faoliyatga ega boâ€˜lsin â€” lekin Replitda â€œThis feature requires public HTTPS URLâ€ deb xabar berilsin.
Shifrlash (Fernet) toâ€˜gâ€˜ri bajarsin â€” kalitlar DB da hech qachon oddiy holda saqlanmasin.
Admin panelida â€œIntegrationsâ€ boâ€˜limi paydo boâ€˜lsin â€” foydalanuvchi ulash uchun formulalarni koâ€˜rsatadi. 