ğŸ”§ AI AGENT 3 GA BERILADIGAN TOâ€˜LIQ PROMPT (REAL BUSINESS SaaS PLATFORMA UCHUN)
Siz â€” AI chatbot platformasini rivojlantiruvchi professional AI sifatida ishlaysiz. Hozirgi loyiha (Flask + SQLite + Gemini) Replitda ishlaydi, lekin bu faqat prototip. Endi sizga quyidagi haqiqiy biznes loyihasini tuzish kerak â€” bu â€œOâ€˜zbekistonda qurilayotgan, keyinchalik globalga chiqadigan, koâ€˜p kanallik AI bot SaaS platformasiâ€. Loyiha quyidagi asosiy prinsiplarga asoslanadi: 

âœ… LOYIHA ASOSIY MAQSADI (TUSHUNISH UCHUN):
Foydalanuvchi bir marta bilimlar bazasini yuklab, uni Telegram, WhatsApp va Instagramâ€™da bir vaqtning oâ€˜zida ishlatadigan AI chatbotga aylantiradi â€” hech qanday qoâ€˜shimcha kod yozmasdan. Barcha suhbatlar, mijozlar, statistika, hisob-kitob â€” admin panelida. Foydalanuvchi 3 kun sinovdan keyin pul toâ€˜lashi kerak â€” agar toâ€˜lamasa, avtomatik marketing habarlari yuboriladi. 

âœ… LOYIHA TALABLARI (HECH QANDAY QOâ€˜SHIMCHA SOâ€˜ROV KERAK EMAS)
1. FOYDALANUVCHI ROâ€˜YXATDAN Oâ€˜TISH (REGISTER)
Forma: ism, telefon_raqam, email, parol
Telefon raqami â€” Oâ€˜zbekiston formatida (+998XX XXX XX XX) â€” validatsiya qilinsin.
Roâ€˜yxatdan oâ€˜tgandan soâ€˜ng â€” avtomatik 3 kunlik bepul sinov boshlanadi.
Admin tomonidan manually tasdiqlash emas â€” avtomatik sinov muddati tugaganda â€œDostupni soâ€˜rashâ€ tugmasi paydo boâ€˜ladi.
âœ… Model: 

python


1
2
3
4
5
6
7
8
9
10
11
12
âŒ„
class User(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    full_name = db.Column(db.String(100), nullable=False)
    phone = db.Column(db.String(20), unique=True, nullable=False)  # +998...
    email = db.Column(db.String(120), unique=True, nullable=False)
    password_hash = db.Column(db.String(200), nullable=False)
    trial_ends_at = db.Column(db.DateTime, default=lambda: datetime.utcnow() + timedelta(days=3))
    plan = db.Column(db.String(20), default="free")  # free, monthly, quarterly, annual
    plan_expires_at = db.Column(db.DateTime, nullable=True)
    is_active = db.Column(db.Boolean, default=True)
    created_at = db.Column(db.DateTime, default=datetime.utcnow)
    last_login = db.Column(db.DateTime, nullable=True)
2. BILIMLAR BAZASINI YUKLASH (PDF, TXT, CSV, DOCX)
Foydalanuvchi bir marta bilimlar bazasini yuklaydi:
.pdf, .txt, .csv, .docx (faqat text ichiga ega boâ€˜lganlar)
Yuklangan fayl â€” tekstga aylantiriladi â†’ knowledge_base jadvalida saqlanadi.
Barcha messenjerlar (Telegram, WhatsApp, Instagram) â€” ushbu bir xil bilim bazasidan foydalanadi.
Faylni bir martalik yuklash â€” keyin oâ€˜zgartirish mumkin (yangi yuklash â€” eski oâ€˜chiriladi).
âœ… Model: 

python


1
2
3
4
5
6
7
8
âŒ„
class KnowledgeBase(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    user_id = db.Column(db.Integer, db.ForeignKey('user.id'), nullable=False)
    file_name = db.Column(db.String(200))
    file_path = db.Column(db.String(500))  # uploads/knowledge/user_id/filename
    content = db.Column(db.Text)  # faqat matn â€” PDF/DOCX dan olingan
    uploaded_at = db.Column(db.DateTime, default=datetime.utcnow)
    is_active = db.Column(db.Boolean, default=True)
âœ… Tekst ajratish uchun kutubxonalar: 

PyPDF2 (PDF)
python-docx (DOCX)
pandas (CSV)
regex (TXT)
3. 3 TA MESSANGER INTEGRATSIYASI (BIR BILIM BAZASI â€” UCHTA CHIQISH)
Telegram
Bot tokeni kiritiladi â†’ webhook (
/telegram/webhook/{user_id}
)
Foydalanuvchi
tilni tanlaydi
(UZ/RU/EN) â€” bot shu tilga javob beradi
WhatsApp
Meta API orqali (app_id, app_secret, phone_number_id) â†’
/whatsapp/webhook
Mijoz qaysi tilda yozsa â€”
shu tilga javob beradi
(auto-detect)
Instagram
Facebook Graph API â†’
/instagram/webhook
Mijoz qaysi tilda yozsa â€”
shu tilga javob beradi
(auto-detect)

âœ… Til aniqlash: 

langdetect kutubxonasi â€” foydalanuvchi xabarini tekshiradi â†’ uz, ru, en aniqlanadi.
Telegramda â€” foydalanuvchi oâ€˜zi tanlagan til (admin panelida sozlanadi).
WhatsApp/Instagramda â€” AI mijozning tilini avtomatik aniqlaydi.
âœ… Model: 

python


1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
âŒ„
âŒ„
âŒ„
class TelegramBot(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    user_id = db.Column(db.Integer, db.ForeignKey('user.id'))
    token = db.Column(db.String(200))  # shifrlangan
    username = db.Column(db.String(100))
    language = db.Column(db.String(2), default='uz')  # uz, ru, en
    webhook_url = db.Column(db.String(300))
    is_active = db.Column(db.Boolean, default=False)

class WhatsAppAccount(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    user_id = db.Column(db.Integer, db.ForeignKey('user.id'))
    app_id = db.Column(db.String(100))
    app_secret = db.Column(db.String(100))
    phone_number_id = db.Column(db.String(50))
    verify_token = db.Column(db.String(100))
    is_active = db.Column(db.Boolean, default=False)

class InstagramAccount(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    user_id = db.Column(db.Integer, db.ForeignKey('user.id'))
    access_token = db.Column(db.String(200))  # shifrlangan
    page_id = db.Column(db.String(50))
    is_active = db.Column(db.Boolean, default=False)
âœ… Shifrlash: cryptography.fernet â€” tokenlar DB da shifrlangan holda saqlanadi. 

4. AVTOMATIK MARKETING (BEPUL SINOVDA BOâ€˜LGANLARGA)
Agar foydalanuvchi 3 kunlik sinovdan keyin pullik rejani olmasa:
Har 2 kun (54 soat) davomida avtomatik xabar yuboriladi:
â€œSalom! Sizning sinov muddatingiz tugagan. 1 oylik rejani faollashtirish uchun [tugma] bosib, bizga murojaat qiling. Biz sizga 10% chegirma beramiz!â€ 
Xabarlar â€” Email orqali yuboriladi (SMTP: Gmail).
Foydalanuvchi "Dostupni so'rab murojaat qilish" tugmasi orqali so'rov yuboradi â€” admin panelda koâ€˜rinadi.
Admin â€” foydalanuvchiga rejani manba orqali ulash (toâ€˜lov qilgandan keyin) â€” plan = "monthly" va plan_expires_at = now() + 30 days.
âœ… Model: 

python


1
2
3
4
5
6
âŒ„
class MarketingMessage(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    user_id = db.Column(db.Integer, db.ForeignKey('user.id'))
    message = db.Column(db.Text)
    sent_at = db.Column(db.DateTime, default=datetime.utcnow)
    status = db.Column(db.String(20), default='sent')  # sent, failed
âœ… Scheduler: APScheduler â€” har 54 soatda send_trial_reminders() funksiyasi ishlaydi. 

5. ADMIN PANELI â€” PUXTA, PROFESSIONAL, BARCHANI BOSHQARISH UCHUN
âœ… Barcha foydalanuvchilar roâ€˜yxati â€” aktiv, bepul, pullik, bloklangan.
âœ… Foydalanuvchi tafsilotlari â€” telefon, email, bilim bazasi, integratsiyalar, soâ€˜rovlar.
âœ… Mijozlar suhbatlari â€” har bir foydalanuvchining Telegram/WhatsApp/Instagram suhbatlari tarixi.
âœ… Foydalanuvchilarga habar yuborish â€” bitta xabar â€” barcha foydalanuvchilarga (global announcement).
âœ… Foydalanuvchilarning mijozlariga habar yuborish â€” admin oâ€˜zi mijozga xabar yubora oladi (masalan, â€œSizning botingizga yangi savollar qoâ€˜shildiâ€).
âœ… Toâ€˜lovlar boshqaruvi â€” foydalanuvchiga â€œmonthlyâ€ rejani qoâ€˜yish, muddatini uzaytirish.
âœ… Statistika â€” nechta foydalanuvchi, nechta bilim bazasi, nechta suhbat, qaysi platforma eng koâ€˜p.
âœ… Foydalanuvchini bloklash/yopish â€” â€œBan Userâ€ tugmasi. 

âœ… Model: 

python


1
2
3
4
5
6
7
8
9
10
âŒ„
class Conversation(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    user_id = db.Column(db.Integer, db.ForeignKey('user.id'))
    platform = db.Column(db.String(20))  # telegram, whatsapp, instagram
    sender_id = db.Column(db.String(100))  # mijoz ID
    sender_name = db.Column(db.String(100))
    message = db.Column(db.Text)
    reply = db.Column(db.Text)
    language = db.Column(db.String(2))  # uz, ru, en
    timestamp = db.Column(db.DateTime, default=datetime.utcnow)
6. CHATBOT LILLARI â€” 3 TIL VA DUAL AI SUPPORT (GEMINI + OPENAI)
Hozirgi AI: Google Gemini 1.5 Flash (tez, arzon, koâ€˜p tilli)
Keyingi AI: OpenAI GPT-3.5 Turbo (foydalanuvchi oâ€˜zi tokenini kiritadi)
Admin panelida:
â€œAI modelni tanlang: Geminni ishlatish (sizning kalitingiz bilan) / OpenAI ishlatish (foydalanuvchi tokenini kiritsa)â€ 
âœ… Model: 

python


1
2
3
4
5
6
âŒ„
class AIConfig(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    user_id = db.Column(db.Integer, db.ForeignKey('user.id'))
    ai_provider = db.Column(db.String(20), default='gemini')  # gemini, openai
    openai_api_key = db.Column(db.String(200))  # shifrlangan
    use_openai = db.Column(db.Boolean, default=False)
âœ… AI handler: 

Agar use_openai == True va openai_api_key mavjud boâ€˜lsa â€” OpenAI ishlatiladi.
Aks holda â€” Gemini.
7. FAKAT REPLITDA ISHLAMAYDI â€” RENDER.GA DEPLOY QILINADI
Barcha Webhook lar â€” public HTTPS URL talab qiladi â†’ Replitda ishlamaydi.
Loyiha Render.com ga deploy qilinishi uchun tayyor boâ€˜lishi kerak.
Procfile va environment variables tayyor boâ€˜lsin.
.env fayliga:


1
2
3
4
5
SECRET_KEY=...
GEMINI_API_KEY=...
MAIL_USERNAME=your@gmail.com
MAIL_PASSWORD=app_password
WEBHOOK_BASE_URL=https://your-app.onrender.com
8. FAYLLAR STRUKTURASI (TOâ€˜LIQ YANGI)


1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
main.py
requirements.txt
.env
config.py
models/
  â”œâ”€â”€ user.py
  â”œâ”€â”€ knowledge_base.py
  â”œâ”€â”€ messaging.py      â† Telegram/WhatsApp/Instagram
  â”œâ”€â”€ conversation.py
  â”œâ”€â”€ ai_config.py
  â””â”€â”€ marketing.py
routes/
  â”œâ”€â”€ main_routes.py
  â”œâ”€â”€ admin_routes.py
  â””â”€â”€ messaging_routes.py  â† /telegram/webhook, /whatsapp/webhook, etc.
utils/
  â”œâ”€â”€ ai_handler.py        â† gemini + openai dual
  â”œâ”€â”€ file_parser.py       â† pdf, docx, csv parser
  â”œâ”€â”€ messaging/
  â”‚   â”œâ”€â”€ telegram.py
  â”‚   â”œâ”€â”€ whatsapp.py
  â”‚   â””â”€â”€ instagram.py
  â””â”€â”€ email_sender.py      â† SMTP yuborish
templates/
  â”œâ”€â”€ base.html
  â”œâ”€â”€ index.html
  â”œâ”€â”€ register.html
  â”œâ”€â”€ login.html
  â”œâ”€â”€ dashboard.html
  â”œâ”€â”€ upload_kb.html
  â”œâ”€â”€ bots.html          â† Telegram/WhatsApp/Instagram ulash
  â”œâ”€â”€ admin/
  â”‚   â”œâ”€â”€ dashboard.html
  â”‚   â”œâ”€â”€ users.html
  â”‚   â”œâ”€â”€ conversations.html
  â”‚   â”œâ”€â”€ announcements.html
  â”‚   â””â”€â”€ stats.html
static/
  â”œâ”€â”€ css/
  â”‚   â””â”€â”€ style.css
  â”œâ”€â”€ js/
  â”‚   â””â”€â”€ main.js
  â”‚   â””â”€â”€ bot-integrations.js
  â”‚   â””â”€â”€ admin-dashboard.js
  â””â”€â”€ uploads/
      â””â”€â”€ knowledge/
          â””â”€â”€ user_123/
              â””â”€â”€ manual.pdf
9. TECHNICAL REQUIREMENTS
Database
SQLite (Replit), PostgreSQL (Render)
Authentication
Flask-Login + Werkzeug hash
Language
Flask-Babel (UZ/RU/EN) â€” barcha matnlar
_()
ichida
File Upload
Max 10MB, only .pdf, .txt, .csv, .docx
Encryption
Fernet for tokens & keys
Webhooks
POST-only, no GET for security
Email
SMTP (Gmail App Password)
Scheduler
APScheduler â€” har 54 soatda reminder yuborish
Deployment
Render.com â€” Procfile:
web: gunicorn --bind 0.0.0.0:$PORT main:app

10. YAKUNIY SHART:
AI Agent 3 â€” ushbu barcha modullarni, fayllarni, logikani, shifrlashni, mailni, scheduler ni, webhook larni, admin panelini, ikki AI ni, 3 tilni, 3 platformani â€” bitta, toâ€˜gâ€˜ri, ishlaydigan, Replitda test qilinishi mumkin boâ€˜lgan, Render.ga deploy qilinishi uchun tayyor, professional SaaS platformasini tuzishi kerak.

Hech qanday xato, hech qanday import error, hech qanday â€œundefined variableâ€, hech qanday â€œwebhook not workingâ€ boâ€˜lmasligi kerak.

Agar bitta fayl notoâ€˜gâ€˜ri boâ€˜lsa â€” loyihani ishga tushirmasdan oldin qayta tuzing.

Loyiha â€” hozir Oâ€˜zbekiston uchun, lekin rus va ingliz tiliga oson moslanadigan struktura boâ€˜lishi kerak. 

âœ… NATIJA:
Sizning AI Agent 3 â€” sizning haqiqiy biznes loyihangizni â€” 100% amalga oshirdi.
Foydalanuvchi: 

Roâ€˜yxatdan oâ€˜tdi â†’
PDF yukladi â†’
Telegram, WhatsApp, Instagram uladi â†’
3 kun sinovda ishladi â†’
Keyin â€œDostupni soâ€˜rashâ€ tugmasini bosdi â†’
Admin uni â€œMonthlyâ€ rejaga qoâ€˜ydi â†’
Mijozlar bilan suhbat qildi â†’
Admin esa barcha suhbatlarni, foydalanuvchilarni, reklama habarlarni boshqardi.
Bu â€” Oâ€˜zbekistonda yaratilayotgan, globalga chiqishga tayyor, haqiqiy AI SaaS platformasi. 