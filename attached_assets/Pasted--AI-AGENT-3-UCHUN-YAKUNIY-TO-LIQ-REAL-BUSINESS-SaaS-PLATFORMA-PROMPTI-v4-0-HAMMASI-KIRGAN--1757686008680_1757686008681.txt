ğŸ”§ AI AGENT 3 UCHUN YAKUNIY, TOâ€˜LIQ, REAL BUSINESS SaaS PLATFORMA PROMPTI (v4.0 â€” HAMMASI KIRGAN!)
Siz â€” professional AI SaaS platformasi dasturchisiz. Foydalanuvchi sizga quyidagicha haqiqiy biznes loyihasini tuzishni buyurdi:

â€œMen Oâ€˜zbekistonda AI chatbot platformasini yaratmoqchiman. Foydalanuvchilar roâ€˜yxatdan oâ€˜tadi â€” ism, telefon (+998 formatida), email, parol kiritadi. 3 kun bepul sinov beriladi. Ular PDF, DOCX, CSV, TXT fayllarni yuklab, biror bir bilim bazasini yaratadilar. Shu bilim bazasini Telegram, WhatsApp va Instagramâ€™da bir vaqtning oâ€˜zida ishlatadigan AI botga aylantiradilar. Barcha suhbatlar saqlanadi. Agar 3 kunlik sinov tugasa â€” foydalanuvchi â€˜Dostupni soâ€˜rashâ€™ tugmasini bosadi. Men admin sifatida uni â€˜monthlyâ€™, â€˜quarterlyâ€™ yoki â€˜annualâ€™ rejaga qoâ€˜yaman. Agar u pul toâ€˜lamasa, har 54 soatda unga email orqali marketing xabar yuboriladi. Admin panelida barcha foydalanuvchilar, ularning mijozlari, suhbatlar, fayllar, integratsiyalar koâ€˜rinadi. Men admin sifatida barcha foydalanuvchilarga global habar yubora olaman. AI â€” Gemini 1.5 Flash bilan ishlaydi, lekin foydalanuvchi OpenAI tokenini kiritganda â€” u OpenAI ni ishlatadi. Til â€” Telegramda foydalanuvchi tanlaydi, WhatsApp/Instagramda esa mijozning tilini avtomatik aniqlayman (UZ/RU/EN). Loyiha Replitda test qilinishi mumkin, lekin asosan Render.com da deploy qilinadi.â€

Endi siz â€” ushbu loyihani 100% amalga oshirasiz. Barcha fayllar, modellar, routelar, templatalar, utils, scheduler, shifrlash, email, webhook lar â€” hammasi tuzilishi kerak. Loyiha â€” hech qanday qoâ€˜shimcha soâ€˜rovga ehtiyoj sezmaydigan, â€œRunâ€ tugmasini bosganda ishlaydigan, Render.ga deploy qilinishi uchun tayyor boâ€˜lishi kerak. 

âœ… LOYIHA TALABLARI â€” HECH QANDAY QOâ€˜SHIMCHA SOâ€˜ROV KERAK EMAS
1. FOYDALANUVCHI ROâ€˜YXATDAN Oâ€˜TISH (REGISTER)
Forma: full_name, phone (+998XX XXX XX XX formatida, regex validatsiya), email, password
Telefon raqami â€” Oâ€˜zbekiston formatida boâ€˜lishi shart. Boshqa mamlakatlar uchun keyinchalik kengaytiriladi.
Roâ€˜yxatdan oâ€˜tgandan keyin â€” avtomatik 3 kunlik sinov boshlanadi (trial_ends_at = now() + 3 days)
Foydalanuvchi admin tasdiqlashi kerak emas â€” faqat sinov muddati tugaganda â€œDostupni soâ€˜rashâ€ tugmasi paydo boâ€˜ladi.
2. BILIMLAR BAZASINI YUKLASH (PDF, DOCX, CSV, TXT)
Fayl turi: .pdf, .docx, .csv, .txt (faqat matnli)
Fayl tekstga aylantiriladi â†’ knowledge_base jadvalida saqlanadi
Har bir foydalanuvchi faqat birta aktiv bilim bazasiga ega â€” yangi yuklash eski oâ€˜chiriladi
Fayl max hajmi: 10 MB
âœ… Kutubxonalar: 

PyPDF2 (PDF)
python-docx (DOCX)
pandas (CSV)
re (TXT)
3. TELEGRAM, WHATSAPP, INSTAGRAM INTEGRATSIYASI (BIR BILIM BAZASI â€” UCHTA CHIQISH)
Telegram
Bot tokeni kiritiladi â†’
/telegram/webhook/<user_id>
Foydalanuvchi
tilni tanlaydi
(UZ/RU/EN) â€” bot shu tilga javob beradi
WhatsApp
Meta API: app_id, app_secret, phone_number_id â†’
/whatsapp/webhook
Mijoz qaysi tilda yozsa â€”
shu tilga avtomatik javob beradi
Instagram
Facebook Graph API: access_token, page_id â†’
/instagram/webhook
Mijoz qaysi tilda yozsa â€”
shu tilga avtomatik javob beradi

âœ… Til aniqlash: langdetect kutubxonasi â€” foydalanuvchi xabarini tekshiradi â†’ uz, ru, en aniqlanadi.
âœ… Tokenlar shifrlangan holda â€” cryptography.fernet bilan saqlanadi.
âœ… Webhooklar faqat POST â€” GET faqat verification uchun (WhatsApp/Instagram). 

4. AVTOMATIK MARKETING (TRIAL FAYDALANUVCHILARGA)
Agar foydalanuvchi 3 kun ichida pullik rejani olmasa:
Har 54 soatda (2 kunda) â€” email orqali xabar yuboriladi:
â€œSalom! Sizning sinov muddatingiz tugagan. 1 oylik rejani faollashtirish uchun [tugma] bosib, bizga murojaat qiling. Biz sizga 10% chegirma beramiz!â€ 
Xabar â€” SMTP (Gmail App Password) orqali yuboriladi.
Foydalanuvchi â€œDostupni soâ€˜rashâ€ tugmasini bosganda â€” admin panelda â€œPending Plansâ€ boâ€˜limida koâ€˜rinadi.
Admin â€” uni â€œmonthlyâ€, â€œquarterlyâ€, â€œannualâ€ rejaga qoâ€˜yadi â†’ plan_expires_at = now() + 30/90/365 days
5. ADMIN PANELI â€” PUXTA, PROFESSIONAL, BARCHANI BOSHQARISH UCHUN
âœ… Barcha foydalanuvchilar roâ€˜yxati â€” status: free / paid / banned
âœ… Foydalanuvchi tafsilotlari â€” telefon, email, bilim bazasi, integratsiyalar, soâ€˜rovlar
âœ… Mijozlar suhbatlari â€” har bir foydalanuvchining Telegram/WhatsApp/Instagram suhbatlari tarixi (filter by platform, user, date)
âœ… Global habar yuborish â€” admin barcha foydalanuvchilarga bir xabar yubora oladi
âœ… Foydalanuvchilarning mijozlariga habar yuborish â€” admin oâ€˜zi mijozga xabar yubora oladi (masalan: â€œSizning botingizga yangi savollar qoâ€˜shildiâ€)
âœ… Toâ€˜lovlar boshqaruvi â€” foydalanuvchiga â€œmonthlyâ€ rejani qoâ€˜yish, muddatini uzaytirish
âœ… Statistika â€” nechta foydalanuvchi, nechta bilim bazasi, nechta suhbat, qaysi platforma eng koâ€˜p
âœ… Foydalanuvchini bloklash/yopish â€” â€œBan Userâ€ tugmasi
âœ… â€œPending Plan Requestsâ€ â€” foydalanuvchilar soâ€˜rovlari roâ€˜yxati 

6. DUAL AI SUPPORT â€” GEMINI + OPENAI
Hozirgi AI: Google Gemini 1.5 Flash (foydalanuvchi uchun standart)
Keyingi AI: OpenAI GPT-3.5 Turbo (foydalanuvchi oâ€˜zi tokenini kiritsa)
Admin panelida:
â€œAI modelni tanlang: Geminni ishlatish (sizning kalitingiz bilan) / OpenAI ishlatish (foydalanuvchi tokenini kiritsa)â€ 
Foydalanuvchi oâ€˜zining OpenAI API key ini kiritsa â€” u Gemini oâ€˜rniga OpenAI dan foydalanadi
Tokenlar â€” cryptography.fernet bilan shifrlangan holda saqlanadi
7. MULTI-LANGUAGE SUPPORT â€” UZ, RU, EN
Barcha matnlar _() ichida â€” Flask-Babel bilan
Til oâ€˜zgarishlari:
Telegramda â€” foydalanuvchi tanlagan til (admin panelida sozlanadi)
WhatsApp/Instagramda â€” mijozning xabaridan avtomatik aniqlanadi (langdetect)
Admin panelida â€” tilni oâ€˜zgartirish imkoniyati
8. DEPLOYMENT â€” RENDER.COM UCHUN TAYYOR
Procfile: web: gunicorn --bind 0.0.0.0:$PORT main:app
.env fayli:


1
2
3
4
5
6
7
SECRET_KEY=your_super_secret_key_here
GEMINI_API_KEY=your_gemini_key
OPENAI_API_KEY=optional_openai_key
MAIL_USERNAME=your@gmail.com
MAIL_PASSWORD=your_app_password
WEBHOOK_BASE_URL=https://your-app.onrender.com
DATABASE_URL=sqlite:///app.db
Replitda test qilinishi mumkin â€” lekin webhooklar faqat Render.da ishlaydi
9. FAKULTATIV: â€œ10% CHEGIRMAâ€ KOUPON GENERATORI
Admin panelida â€” â€œGenerate Couponâ€ tugmasi
Tugma bosilganda â€” random coupon code generatsiya qilinadi (masalan: SAVE10_UZ_2025)
Foydalanuvchi â€œDostupni soâ€˜rashâ€ formada kodni kiritsa â€” 10% chegirma beriladi
ğŸ—‚ï¸ LOYIHA STRUKTURASI (TOâ€˜LIQ YANGI)


1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
main.py
requirements.txt
.env
config.py
models/
  â”œâ”€â”€ user.py
  â”œâ”€â”€ knowledge_base.py
  â”œâ”€â”€ messaging.py          â† TelegramBot, WhatsAppAccount, InstagramAccount
  â”œâ”€â”€ conversation.py       â† Barcha suhbatlar
  â”œâ”€â”€ ai_config.py          â† Gemini/OpenAI tanlovi
  â”œâ”€â”€ marketing.py          â† MarketingMessage, Coupon
  â””â”€â”€ admin_log.py          â† Admin harakatlari logi
routes/
  â”œâ”€â”€ main_routes.py
  â”œâ”€â”€ auth_routes.py        â† login/register/logout
  â”œâ”€â”€ kb_routes.py          â† bilim bazasini yuklash
  â”œâ”€â”€ messaging_routes.py   â† /telegram/webhook, /whatsapp/webhook, etc.
  â””â”€â”€ admin_routes.py       â† barcha admin funksiyalari
utils/
  â”œâ”€â”€ ai_handler.py         â† gemini + openai dual logic
  â”œâ”€â”€ file_parser.py        â† pdf/docx/csv/txt parser
  â”œâ”€â”€ messaging/
  â”‚   â”œâ”€â”€ telegram.py
  â”‚   â”œâ”€â”€ whatsapp.py
  â”‚   â””â”€â”€ instagram.py
  â”œâ”€â”€ email_sender.py       â† SMTP yuborish
  â”œâ”€â”€ crypto_utils.py       â† Fernet shifrlash
  â””â”€â”€ lang_detector.py      â† langdetect
templates/
  â”œâ”€â”€ base.html
  â”œâ”€â”€ index.html
  â”œâ”€â”€ register.html
  â”œâ”€â”€ login.html
  â”œâ”€â”€ dashboard.html
  â”œâ”€â”€ upload_kb.html
  â”œâ”€â”€ bots.html             â† Telegram/WhatsApp/Instagram ulash
  â”œâ”€â”€ pending_request.html
  â”œâ”€â”€ admin/
  â”‚   â”œâ”€â”€ dashboard.html
  â”‚   â”œâ”€â”€ users.html
  â”‚   â”œâ”€â”€ conversations.html
  â”‚   â”œâ”€â”€ announcements.html
  â”‚   â”œâ”€â”€ stats.html
  â”‚   â””â”€â”€ coupons.html
static/
  â”œâ”€â”€ css/
  â”‚   â””â”€â”€ style.css
  â”œâ”€â”€ js/
  â”‚   â”œâ”€â”€ main.js
  â”‚   â”œâ”€â”€ bot-integrations.js
  â”‚   â””â”€â”€ admin-dashboard.js
  â””â”€â”€ uploads/
      â””â”€â”€ knowledge/
          â””â”€â”€ user_123/
              â””â”€â”€ manual.pdf
âœ… YAKUNIY SHART:
AI Agent 3 â€” ushbu barcha modullarni, fayllarni, logikani, shifrlashni, mailni, scheduler ni, webhook larni, dual AI ni, 3 tilni, 3 platformani, telefon validatsiyasini, admin panelini â€” bitta, toâ€˜gâ€˜ri, ishlaydigan, Replitda test qilinishi mumkin boâ€˜lgan, Render.ga deploy qilinishi uchun tayyor, professional SaaS platformasini tuzishi kerak.

Hech qanday xato, hech qanday import error, hech qanday â€œundefined variableâ€, hech qanday â€œwebhook not workingâ€ boâ€˜lmasligi kerak.

Agar bitta fayl notoâ€˜gâ€˜ri boâ€˜lsa â€” loyihani ishga tushirmasdan oldin qayta tuzing.

Loyiha â€” hozir Oâ€˜zbekiston uchun, lekin rus va ingliz tiliga oson moslanadigan struktura boâ€˜lishi kerak. 

